<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style></style>
  </head>
  <body>
    <div class="container">
      <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    </div>
    <script src="view_api_wrapper.js"></script>

    <script>
      Module = {
        canvas: document.getElementById("canvas")
      };

      Module.onRuntimeInitialized = () => {
        viewApi = new ViewApi(Module);

        fetch("surface.json").then(response => {
          response.json().then(data => {
            console.log(data);
            const { vertices, triangles } = data;

            viewApi.createMesh2(vertices, triangles);
          });
        });

        // fetch("cube.json").then(response => {
        //   response.json().then(data => {
        //     const { vertices } = data;
        //     console.log({ vertices });

        //     const cube1 = vertices.map((v, i) => {
        //       if (i % 3 == 0) {
        //         return v + 1.0;
        //       }
        //       return v;
        //     });
        //     const cube2 = vertices.map((v, i) => {
        //       if (i % 3 == 0) {
        //         return v - 1.0;
        //       }
        //       return v;
        //     });

        //     console.log({ vertices, cube1, cube2 });

        //     viewApi.createMesh(cube1);
        //     viewApi.createMesh(cube2);
        //   });
        // });
      };
    </script>

    <script async type="text/javascript" src="index.js"></script>
  </body>
</html>
