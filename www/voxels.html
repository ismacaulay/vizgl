<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Topography Example</title>
        <style></style>
    </head>
    <body>
        <div class="container">
            <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
        </div>
        <script src="vizgl-wrapper-umd.js"></script>

        <script>
            const vizgl = window.vizgl;

            function loadJSON(url) {
                return fetch(url).then(response => response.json());
            }

            Module = {
                canvas: document.getElementById('canvas'),

                onRuntimeInitialized: () => {
                    const module = new vizgl.ModuleWrapper(Module);
                    const geometryApi = new vizgl.GeometryApi(module);
                    const colorMapApi = new vizgl.ColorMapApi(module);
                    const mappingApi = new vizgl.MappingApi(module);
                    const modelApi = new vizgl.ModelApi(module);

                    // Wait for gl context to be created an initialized (need main to run first)
                    setTimeout(() => {
                        const dims = [16, 16, 16];
                        const geometryId = geometryApi.createVoxelMesh(dims);

                        const color = [116, 191, 165];
                        const mappingId = mappingApi.createStaticMapping(color);

                        const modelId = modelApi.createModel(geometryId, mappingId);

                        console.log({ geometryId, mappingId });
                    }, 1);
                },
            };
        </script>

        <script async type="text/javascript" src="vizgl.js"></script>
    </body>
</html>
